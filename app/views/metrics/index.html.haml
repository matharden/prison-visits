:css
  .prison_name {
    width: 17em;
  }

  .even {
    background-color: LightGray;
  }

  table {
    border-collapse: collapse;
  }

  table .narrow {
    width: 3em;
  }

  table .align-right {
    text-align: right;
  }
%h1
  Performance dashboard
  = link_to('CSV', format: :csv)

%table
  %tr
    %th
      Prison name
    %th
      Total
    %th
      Waiting
    %th
      Overdue
    %th
      Rejected
    %th
      Confirmed
    %th
      End-to-end time
    %th
      Processing time
    %th
      \% rejected
    %th
      \% rejected (no slot)
    %th
      \% rejected (contact list)
    %th
      \% rejected (no vos left)
  - @prisons.each_with_index do |prison, i|
    %tr{class: i.even? ? 'even' : 'odd'}
      %td.prison_name
        = prison
      %td.narrow.align-right
        = @dataset[prison].total_visits
      %td.narrow.align-right
        = @dataset[prison].waiting_visits
      %td.narrow.align-right
        = @dataset[prison].overdue_visits(@overdue_threshold)
      %td.narrow.align-right
        = @dataset[prison].rejected_visits
      %td.narrow.align-right
        = @dataset[prison].confirmed_visits
      %td.align-right
        = display_interval(@dataset[prison].end_to_end_time.percentile(95))
      %td.align-right
        = display_interval(@dataset[prison].processing_time.percentile(95))
      %td.align-right
        = display_percent(@dataset[prison].percent_rejected)
      %td.align-right
        = display_percent(@dataset[prison].percent_rejected(Confirmation::NO_SLOT_AVAILABLE))
      %td.align-right
        = display_percent(@dataset[prison].percent_rejected(Confirmation::NOT_ON_CONTACT_LIST))
      %td.align-right
        = display_percent(@dataset[prison].percent_rejected(Confirmation::NO_VOS_LEFT))

