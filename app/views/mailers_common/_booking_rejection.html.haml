!!!
%body
  %p
    Dear #{@visit.visitors.first.first_name},
  %p
    - case @confirmation.outcome
    - when Confirmation::NO_SLOT_AVAILABLE
      %p
        We’re sorry but none of the dates and times you chose to visit
        %strong #{@visit.prisoner.first_name} #{initial ? @visit.prisoner.last_initial + '.' : @visit.prisoner.last_name}
        at
        %strong #{@visit.prisoner.prison_name}
        were available.
      %p
        - @visit.slots.each_with_index do |slot, index|
          - if slot.date.present?
            - unless index == 0 
              %br
            #{index + 1}. #{Date.parse(slot.date).strftime("%A %e %B")}, #{display_time_slot(slot.times)}
      %p
        Please visit to choose some
        %a{ href: "http://gov.uk/prison-visits/"} alternative dates.
    - when Confirmation::NOT_ON_CONTACT_LIST
      %p
        You have tried to book a visit but not all visitors are on the prisoner’s contact list.
      %p
        You need to contact the prisoner to be added to the contact list.
      %p
    - when Confirmation::NO_VOS_LEFT
      %p
        You have tried to book a visit but the prisoner you want to visit has not got any visiting allowance left. You need to contact the prisoner to find out more about their visiting allowance.
    - else
      #{raise 'bad reason'}
    %p
      #{@message_from_prison}
    %p
      If you have any questions, visit the
      %a{ :href => prison_url(@visit) } prison website
      or call the prison on
      %strong #{prison_phone}.
